##Реализация чат сервера
### Основные сущности

Ниже перечислены основные сущности, которыми оперирует сервер.

#### User - com.chulyukin.yourcodereview.task2.entity.User
Пользователь приложения. Имеет следующие свойства:

* **id** - уникальный идентификатор пользователя
* **username** - уникальное имя пользователя
* **created_at** - время создания пользователя

#### Chat - com.chulyukin.yourcodereview.task2.entity.Chat

Отдельный чат. Имеет следующие свойства:

* **id** - уникальный идентификатор чата
* **name** - уникальное имя чата
* **users** - список пользователей в чате, отношение многие-ко-многим
* **created_at** - время создания

#### Message - com.chulyukin.yourcodereview.task2.entity.Message

Сообщение в чате. Имеет следующие свойства:

* **id** - уникальный идентификатор сообщения
* **chat** - ссылка на идентификатор чата, в который было отправлено сообщение
* **author** - ссылка на идентификатор отправителя сообщения, отношение многие-к-одному
* **text** - текст отправленного сообщения
* **created_at** - время создания

### Основные API методы

Методы обрабатывают HTTP POST запросы c телом, содержащим все необходимые параметры в JSON.

#### Добавить нового пользователя

Запрос:

```bash
curl -X POST -H "Content-Type: application/json" 
-d "{\"username\": \"user_6\"}" 
http://localhost:9000/users/add
```

Ответ: `id` созданного пользователя или HTTP-код ошибки.

#### Создать новый чат между пользователями

Запрос:

```bash
curl -X POST -H "Content-Type: application/json" 
-d "{\"name\": \"chat_1\", \"users\": [\"<USER_ID_1>\", \"<USER_ID_2>\"]}"
http://localhost:9000/chats/add 
```

Ответ: `id` созданного чата или HTTP-код ошибки.

Количество пользователей не ограничено.

#### Отправить сообщение в чат от лица пользователя

Запрос:

```bash
curl -X POST -H "Content-Type: application/json" 
-d "{\"chat\": \"<CHAT_ID>\", \"author\": \"<USER_ID>\", \"text\": \"<TEXT>\"}"
http://localhost:9000/messages/add
```

Ответ: `id` созданного сообщения или HTTP-код ошибки.

#### Получить список чатов конкретного пользователя

Запрос:

```bash
curl -X POST -H "Content-Type: application/json" 
-d "{\"user\": \"<USER_ID>\"}"
http://localhost:9000/chats/get
```

Ответ: cписок всех чатов со всеми полями, отсортированный по времени создания последнего сообщения в чате (от позднего к раннему). Или HTTP-код ошибки.

#### Получить список сообщений в конкретном чате

Запрос:

```bash
curl -X POST -H "Content-Type: application/json" 
-d "{\"chat\": \"<CHAT_ID>\"}"
http://localhost:9000/messages/get
```

Ответ: список всех сообщений чата со всеми полями, отсортированный по времени создания сообщения (от раннего к позднему). Или HTTP-код ошибки.


### Инструкция по запуску
- Через команду mvn install собрать проект в jar архив. <br>
  Запустить проект можно открыв терминал в корне проекта, следующей коммандой:
  java -jar target/task2-0.0.1-SNAPSHOT.jar

- Так же проект можно запустить через intellij idea запустив на исполнение класс Task2Application

###Примеры использования и результаты выполнения программы
Запустить приложение. 
Запустить скрипт post_requests.sh на исполнение расположенный в корне проекта.
После его выполнения будут созданы пользователи (user_1, user_2, user_3, user_4, user_5) и чаты (chat_1, chat_2) с сообщениями.
<br>При отправке запроса:<br> 
```bash
curl -X POST -H "Content-Type: application/json" 
-d "{\"user\": \"3\"}"
http://localhost:9000/chats/get
```
- вернется список из двух чатов (chat_1, chat_2) отсортированных по времени создания последнего сообщения в чате

При отправке запроса:<br>
```bash
curl -X POST -H "Content-Type: application/json" 
-d "{\"chat\": \"1\"}"
http://localhost:9000/messages/get
```
- вернется список всех сообщений чата отсортированный по времени создания сообщения 